[gd_scene load_steps=32 format=3 uid="uid://b8kl60fulqq1u"]

[ext_resource type="Script" path="res://assets/player/player.gd" id="1_xhwip"]
[ext_resource type="Script" path="res://assets/player/Camera2D.gd" id="2_2bp8c"]
[ext_resource type="Texture2D" uid="uid://bg1sjscorno7f" path="res://textures/player/idle/Standing-1.png" id="2_5gioq"]
[ext_resource type="Texture2D" uid="uid://clcglwvf1ke3t" path="res://textures/player/idle/Standing-2.png" id="3_fetoq"]
[ext_resource type="Texture2D" uid="uid://gjxwrumqh7be" path="res://textures/player/idle/Standing-3.png" id="4_83mgy"]
[ext_resource type="Texture2D" uid="uid://ck6g1mwjw4rc1" path="res://textures/player/jump/Jump-3.png" id="4_v2ryf"]
[ext_resource type="Texture2D" uid="uid://ulkg4oelvyat" path="res://textures/player/idle/Standing-4.png" id="5_be2kw"]
[ext_resource type="PackedScene" uid="uid://clf8aqe0iy2if" path="res://assets/player/hud/hud.tscn" id="5_e68ka"]
[ext_resource type="Script" path="res://assets/player/state_machine/state_machine.gd" id="7_tys86"]
[ext_resource type="Script" path="res://assets/player/states/idle.gd" id="8_u7umh"]
[ext_resource type="Texture2D" uid="uid://boux0i1b6rdrc" path="res://textures/player/jump/Jump-1.png" id="9_3mqwm"]
[ext_resource type="Script" path="res://assets/player/states/walk.gd" id="9_ye4cr"]
[ext_resource type="Texture2D" uid="uid://pgo03ej7ogqu" path="res://textures/player/jump/Jump-2.png" id="10_ehki0"]
[ext_resource type="Script" path="res://assets/player/states/jump.gd" id="10_x52e5"]
[ext_resource type="Texture2D" uid="uid://bqmiju3ilthkr" path="res://textures/player/running/Walking-1.png" id="11_7tlb8"]
[ext_resource type="Script" path="res://assets/player/states/fall.gd" id="11_h6ekv"]
[ext_resource type="Texture2D" uid="uid://dqi1fiyxpcrsy" path="res://textures/player/running/Walking-2.png" id="12_aj0s8"]
[ext_resource type="Texture2D" uid="uid://ddutpvjwfm7tl" path="res://textures/player/running/Walking-3.png" id="13_7egcc"]
[ext_resource type="Texture2D" uid="uid://dg8r3mv6j5pft" path="res://textures/player/running/Walking-4.png" id="14_kfhnk"]
[ext_resource type="Texture2D" uid="uid://d0dv8kfxo1w3q" path="res://textures/player/running/Walking-5.png" id="15_icypd"]
[ext_resource type="PackedScene" uid="uid://bt3ngcbslwttq" path="res://assets/weapons/gun/gun.tscn" id="15_scggg"]
[ext_resource type="Texture2D" uid="uid://5txs87wrs2qj" path="res://textures/player/running/Walking-6.png" id="16_0s6rb"]
[ext_resource type="Texture2D" uid="uid://b16n4d16ewewt" path="res://textures/player/running/Walking-7.png" id="17_kx8jj"]
[ext_resource type="Texture2D" uid="uid://cbm0663tlnwme" path="res://textures/player/running/Walking-8.png" id="18_i56ae"]
[ext_resource type="PackedScene" uid="uid://ch6mplaghrax4" path="res://assets/weapons/saber/saber.tscn" id="19_vg4rd"]
[ext_resource type="AudioStream" uid="uid://bfxypqbbuwu4v" path="res://assets/player/sounds/gravel_footstep.wav" id="21_0dmyl"]
[ext_resource type="AudioStream" uid="uid://bdis33wsr81xy" path="res://assets/player/sounds/gravel_land.ogg" id="21_vv04n"]
[ext_resource type="AudioStream" uid="uid://c4d3bsd1sea1q" path="res://assets/player/sounds/dash.wav" id="24_irtn5"]
[ext_resource type="PackedScene" uid="uid://d1n7jvmbhf7oo" path="res://assets/player/dash_effect.tscn" id="28_70ip8"]

[sub_resource type="FastNoiseLite" id="FastNoiseLite_w7ylu"]
noise_type = 3
frequency = 0.1068
fractal_type = 0
metadata/_preview_in_3d_space_ = true

[sub_resource type="SpriteFrames" id="SpriteFrames_lbsb1"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": ExtResource("4_v2ryf")
}],
"loop": false,
"name": &"fall",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("2_5gioq")
}, {
"duration": 1.0,
"texture": ExtResource("3_fetoq")
}, {
"duration": 1.0,
"texture": ExtResource("4_83mgy")
}, {
"duration": 1.0,
"texture": ExtResource("5_be2kw")
}],
"loop": true,
"name": &"idle",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("9_3mqwm")
}, {
"duration": 1.0,
"texture": ExtResource("10_ehki0")
}, {
"duration": 1.0,
"texture": ExtResource("4_v2ryf")
}],
"loop": false,
"name": &"jump",
"speed": 11.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("11_7tlb8")
}, {
"duration": 1.0,
"texture": ExtResource("12_aj0s8")
}, {
"duration": 1.0,
"texture": ExtResource("13_7egcc")
}, {
"duration": 1.0,
"texture": ExtResource("14_kfhnk")
}, {
"duration": 1.0,
"texture": ExtResource("15_icypd")
}, {
"duration": 1.0,
"texture": ExtResource("16_0s6rb")
}, {
"duration": 1.0,
"texture": ExtResource("17_kx8jj")
}, {
"duration": 1.0,
"texture": ExtResource("18_i56ae")
}],
"loop": true,
"name": &"walk",
"speed": 16.0
}]

[node name="player" type="CharacterBody2D"]
z_index = 1
scale = Vector2(0.5, 0.5)
collision_layer = 10
collision_mask = 5
floor_constant_speed = true
floor_snap_length = 10.0
script = ExtResource("1_xhwip")
speed = 75.0
acceleration = 8.0
jump_height = 35.0
jump_descent = 0.2
jump_peak = 0.3
ghost_time = 0.015
ghost_node = ExtResource("28_70ip8")
knockback_multiplier = 4.0
ability_cooldown = 8.0

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="."]
position = Vector2(2, 0)
polygon = PackedVector2Array(-12, 20.5, 8, 20.5, 8, 2, 6, -8, -2, -12, -10, -8, -12, 2)

[node name="Camera2D" type="Camera2D" parent="."]
ignore_rotation = false
zoom = Vector2(8.04, 8.04)
position_smoothing_enabled = true
position_smoothing_speed = 6.0
drag_vertical_enabled = true
drag_left_margin = 0.05
drag_top_margin = 0.5
drag_right_margin = 0.05
drag_bottom_margin = 0.1
script = ExtResource("2_2bp8c")
decay = 0.5
max_offset = Vector2(15, 10)
max_roll = 0.08
noise = SubResource("FastNoiseLite_w7ylu")

[node name="AnimatedSprite2D" type="AnimatedSprite2D" parent="."]
texture_filter = 1
scale = Vector2(0.125, 0.125)
sprite_frames = SubResource("SpriteFrames_lbsb1")
animation = &"idle"
offset = Vector2(72, 0)

[node name="saber" parent="AnimatedSprite2D" instance=ExtResource("19_vg4rd")]
position = Vector2(80, 0)
frame = 0
frame_progress = 0.0

[node name="gun" parent="AnimatedSprite2D" instance=ExtResource("15_scggg")]
visible = false
position = Vector2(16, 0)

[node name="HUD" parent="." instance=ExtResource("5_e68ka")]
visible = false

[node name="damage_timer" type="Timer" parent="."]
wait_time = 1.5
one_shot = true

[node name="dash_cooldown" type="Timer" parent="."]
wait_time = 1.5
autostart = true

[node name="footstep" type="AudioStreamPlayer2D" parent="."]
position = Vector2(1, 0)
scale = Vector2(0.125, 0.125)
stream = ExtResource("21_0dmyl")
volume_db = -20.0
max_polyphony = 2
bus = &"Gameplay"

[node name="land" type="AudioStreamPlayer2D" parent="."]
stream = ExtResource("21_vv04n")
volume_db = -18.0
bus = &"Gameplay"

[node name="dash" type="AudioStreamPlayer2D" parent="."]
position = Vector2(1, 0)
scale = Vector2(0.125, 0.125)
stream = ExtResource("24_irtn5")
volume_db = -15.0
pitch_scale = 0.75
bus = &"Gameplay"

[node name="jump" type="AudioStreamPlayer2D" parent="."]
position = Vector2(1.125, 0)
scale = Vector2(0.015625, 0.015625)
stream = ExtResource("24_irtn5")
volume_db = -15.0
pitch_scale = 0.9
bus = &"Gameplay"

[node name="state_machine" type="Node" parent="." node_paths=PackedStringArray("starting_state")]
script = ExtResource("7_tys86")
starting_state = NodePath("idle")

[node name="idle" type="Node" parent="state_machine" node_paths=PackedStringArray("walk", "jump", "fall")]
script = ExtResource("8_u7umh")
walk = NodePath("../walk")
jump = NodePath("../jump")
fall = NodePath("../fall")

[node name="walk" type="Node" parent="state_machine" node_paths=PackedStringArray("idle", "jump", "fall")]
script = ExtResource("9_ye4cr")
idle = NodePath("../idle")
jump = NodePath("../jump")
fall = NodePath("../fall")

[node name="jump" type="Node" parent="state_machine" node_paths=PackedStringArray("idle", "walk", "fall")]
script = ExtResource("10_x52e5")
idle = NodePath("../idle")
walk = NodePath("../walk")
fall = NodePath("../fall")

[node name="fall" type="Node" parent="state_machine" node_paths=PackedStringArray("idle", "walk", "jump")]
script = ExtResource("11_h6ekv")
idle = NodePath("../idle")
walk = NodePath("../walk")
jump = NodePath("../jump")

[connection signal="timeout" from="dash_cooldown" to="." method="_on_dash_cooldown_timeout"]
